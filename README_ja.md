# デバイスエイリアスマネージャー

[English](README.md) | [中文](README_zh.md)

デバイスエイリアスマネージャーは、USBデバイスのエイリアスを管理するためのBashスクリプトツールです。新しいデバイスの検出、記録されたデバイスの表示、詳細情報の確認、デバイス記録の削除、エイリアスの変更などの操作を行うことができます。

## 機能

- 新しいUSBデバイスの接続を検出
- 新しいデバイスにエイリアスを割り当て
- 記録されたデバイスの一覧を表示
- デバイスの詳細情報を表示
- デバイス記録を削除
- デバイスエイリアスを変更
- 多言語対応（英語、中国語、日本語）
- 自動言語検出
- 設定のカスタマイズ可能
- ログ機能
- udevルールのバックアップ管理

## インストール

1. リポジトリをクローンします：
   ```bash
   git clone https://github.com/XKHoshizora/dev-mgmt-tools.git
   ```
2. プロジェクトディレクトリに移動します：
   ```bash
   cd dev-mgmt-tools
   ```
3. スクリプトに実行権限を付与します：
   ```bash
   chmod +x dev_alias_manager.sh
   ```

## 使い方

スクリプトを実行：

```bash
sudo ./dev_alias_manager.sh
```

注：`udev` ルールの変更など一部の操作には `root` 権限が必要です。`sudo` を使ってスクリプトを実行することをお勧めします。

画面の指示に従って操作を選択します：

1. 新しいデバイスを検出
2. 記録されたデバイスを表示
3. デバイスの詳細情報を表示
4. デバイス記録を削除
5. デバイスエイリアスを変更
6. 終了

## 設定

設定ファイルは `config/dev_alias_manager.conf` にあります。以下の設定をカスタマイズできます：

- `MAX_RETRIES`: シンボリックリンク作成の最大試行回数
- `TIMEOUT`: デバイス操作のタイムアウト
- `DEVICE_RECORD_FILE`: udevルールファイルの場所
- `LOG_LEVEL`: ログレベル（DEBUG, INFO, WARNING, ERROR）
- `AUTO_NAMING`: 自動デバイス命名の有効/無効化
- `AUTO_NAME_PREFIX`: 自動生成された名前の接頭辞
- `LANGUAGE`: 特定の言語を強制指定（en, zh, ja）
- `MAX_BACKUPS`: 保持するバックアップファイルの最大数

デフォルトの設定ファイル `dev_alias_manager.conf.default` がテンプレートとして提供されています。

## ログ

ログファイルは `logs/dev_alias_manager.log` に保存されます。

## 言語サポート

スクリプトはシステム言語を自動的に検出し、英語、中国語、日本語のいずれかでメッセージを表示します。システム言語がこれら以外の場合、デフォルトで英語が使用されます。設定ファイルで手動で言語を設定することもできます。

## バックアップ

スクリプトは `udev` ルールファイルを変更する前にバックアップを作成します。バックアップは `backups` ディレクトリに保存されます。保持するバックアップの数は設定可能です。

## 注意

- このスクリプトはシステムの `udev` ルールを変更します。慎重に使用してください。
- 操作前に必ず `udev` ルールファイルのバックアップを作成します。
- 問題が発生した場合は、ログファイルを確認してください。
- スクリプトは複数のインスタンスが同時に実行されないよう、ロックファイルを使用します。

## コントリビューション

バグ報告やプルリクエストは歓迎します。このプロジェクトを改善するためにご協力ください。

## ライセンス

このプロジェクトはMITライセンスの下でライセンスされています。詳細については、[LICENSE](LICENSE) ファイルを参照してください。